<!DOCTYPE html>
<html>
    {% load static %}
    <head>
        <title>Spotser</title>
        <link rel="icon" href="{% static 'img/icon.png' %}">
    </head>
    <link rel="stylesheet" href="{% static 'css/newsfeed.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <body  onload="loader()">
        <div class="homepage">
            <!-- header import -->
            {% include 'header.html' %}
            
            <!-- 3 divs -->
            <div class="container_newsfeed not-loaded" id="div-loaded">
                <div class="mobile-view">
                    <!-- profile picture -->
                    <form method="post" action="profile" enctype="multipart/form-data">{% csrf_token %}
                    <div class="c1-profile">
                        <div class="bg-pp">
                            {% if mydetials.profile_pic != '' %}
                            <img class="back-op" src="media/{{mydetials.profile_pic}}">
                            {% else %}
                            <img class="back-op" src="{% static 'img/defaultpp.jpg' %}">
                            {% endif %}
                            <label class="pp-chg" for="picupload" onclick="show_picture()"><img class="camera" src="{% static 'icon/camera.png' %}"></label>
                            <input type="file" id="picupload" name="image">
                        </div>
                    </div>

                    <div id="mypic">
                        <div class="modal">
                            <div class="modaltop">
                                <div class="modalheader">
                                    <span style="color:black;margin-left:120px;">Profile Picture</span>
                                </div>
                                <div class="closebutton">
                                    <span onclick="document.getElementById('mypic').style.display='none';"><b style="color:black; font-size:25px;">&times;</b></span>
                                </div>
                            </div>
                            <div class="pp-div" id="pp-preview">
                            </div>
                            <div class="post-submit">
                                <input type="submit" value="UPLOAD">
                            </div>
                        </div>
                    </div>
                </form>

                    <!-- name -->
                    <div class="c1-profile">
                        {% for i in user %}
                        <b class="name-font">{{i.first_name}} {{i.last_name}}</b>
                        {% endfor %}
                    </div>
                    <!-- follower/following -->
                    <div class="c1-profile">
                        <table>
                            <td>
                                {{count}} <br><p>Followers</p>
                            </td>
                            <td>
                                {{count_following}} <br><p>Following</p>
                            </td>
                        </table>
                    </div>
                    <!-- bio -->
                    <div class="c1-profile">
                        <div class="bio">
                            football gamer
                        </div>
                    </div>
                    <!-- edit profile -->
                    <div class="c1-profile">
                        <div class="edit-p">
                            <button onclick="show_p_editor()">Edit Profile</button>
                        </div>
                    </div>
                    <div id="p_update_modal" style="color:black">
                        <div class="modal">
                            <div class="modaltop">
                                <div class="modalheader">
                                   <div id="profile-title">Account Information</div>
                                   <div id="profile-back"><button onclick="show_p_editor()"><table><td><img src="{% static 'icon/back.png' %}"></td><td>Back</td></table></button></div>
                                </div>
                                <div class="closebutton">
                                    <span onclick="document.getElementById('p_update_modal').style.display='none';">&times;</span>
                                </div>
                            </div>
                            <div class="pro_update">
                                <form method="POST">
                                    {% csrf_token %}
                                    <div id="profile-info">
                                        <div class="fullname">
                                            <input type="text" placeholder="First Name" name="first_name" value="Rusan">
                                            <input type="text" placeholder="Last Name" name="last_name" value="Vaidya">
                                        </div>
                                        <div class="emailpassword">
                                            <input type="text" placeholder="Email or Phone Number" name="email" value="abc@gmail.com">
                                        </div>
                                        <div class="bio-area">
                                            <textarea placeholder="Bio" name="bio">football gamer</textarea>
                                        </div>
                                        <div class="i-edit">
                                            <label class="interest-edit">
                                                <table><td>Interest</td><td><img src="{% static 'icon/edit.png' %}" onclick="chg_interest()"></td></table>
                                            </label>
                                            <div class="interest-list">
                                                <div><table><td><img src="{% static 'interest/football.png' %}"></td><td>Football</td></table></div>
                                                <div><table><td><img src="{% static 'interest/gaming.png' %}"></td><td>Gaming</td></table></div>
                                            </div>
                                        </div>
                                    </div>     
                                    <div id="interest-info">
                                        <div id="s-interest">
                                            <input type="search" placeholder="Search interest">
                                        </div>
                                        <div id="l-interest">
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                            <label><input type="checkbox" value="Art">Art</label>
                                        </div>
                                    </div>
                                    <div class="post-submit">
                                        <input type="submit" value="Save">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container2">
                    <div class="container2-1">
                    {% include 'new_post.html' %}

                       {%for post in posts%}
                        {% for p in pu %}
                            {% if p.id == post.author_id %}
                    <div class="c2">
                        <div style="overflow: hidden;">
                            <div class="c2-post">
                                <table>
                                    {% if mydetials.profile_pic != '' %}
                                    <td class="posted-img"><img class="back-op" src="media/{{mydetials.profile_pic}}">
                                    {% else %}
                                    <td class="posted-img"><img class="back-op" src="{% static 'img/defaultpp.jpg' %}"></td>
                                    {% endif %}
                                    <td class="posted-name"><a href="">{{p.first_name}} {{p.last_name}}</a>
                                    </td>
                                    {% if post.emoji != '' %}
                                    <td>
                                        {{post.feeling}}
                                    </td>
                                    <td class="femoji">

                                        <img src='/static/{{post.emoji}}'>

                                    </td>
                                    {% endif %}
                                </table>
                            </div>
                            <div class="light" style="float: right; font-size: 15px; padding: 15px;">
                                {{post.created}}
                            </div>
                        </div>
                        <div class="caption">
                            {{post.usercontent}}
                        </div>
                        <div id="{{post.id}}" style="display:none">{{post.userfile}}</div>
                        <div class="postedimg" id="new{{post.id}}">
                            <video src="media/{{post.userfile}}" controls id='vid_spo{{post.id}}' width="100%" height="100%"></video>
                            <img src="media/{{post.userfile}}" id='img_spo{{post.id}}'>

                        </div>
                        <script>
                            var x=document.getElementById({{post.id}}).innerHTML;
                            console.log(x);

                            var pics = /.(jpeg|jpg|png)$/;
                            var vids = /.(mp4|wmv)/;


                            if (pics.test(x)){
                                document.getElementById('vid_spo{{post.id}}').style.display='none';
                            }
                            else if (vids.test(x)){
                                document.getElementById('img_spo{{post.id}}').style.display='none';
                            }
                            else{
                            document.getElementById('new{{post.id}}').style.display='none';
                            }


                        </script>
                        <div class="joinin">
                            <form>
                                <label for="like" id="i-l">
                                    <span>120</span><img src="{% static 'icon/like-i.png' %}">
                                </label>
                                <label for="like" id="a-l">
                                    <span>120</span><img src="{% static 'icon/like.png' %}">
                                </label>
                                <label for="like" id="i-d">
                                    <span>22</span><img src="{% static 'icon/dislike-i.png' %}">
                                </label>
                                <label for="like" id="a-d">
                                    <span>22</span><img src="{% static 'icon/dislike.png' %}">
                                </label>
                                <label for="like" id="i-c" onclick="myComment()">
                                    <span>40</span><img src="{% static 'icon/comment-i.png' %}">
                                </label>
                                <label for="like" id="a-c">
                                    <span>40</span><img src="{% static 'icon/comment.png' %}">
                                </label>
                                <label for="like" id="i-s">
                                    <img src="{% static 'icon/share-i.png' %}">
                                </label>
                                <label for="like" id="a-s">
                                    <img src="{% static 'icon/share.png' %}">
                                </label>
                                <label for="like" id="i-sa">
                                    <img src="{% static 'icon/saved-i.png' %}">
                                </label>
                                <label for="like" id="a-sa">
                                    <img src="{% static 'icon/saved-a.png' %}">
                                </label>
                                <label for="like" id="i-f">
                                    <img src="{% static 'icon/flag-i.png' %}">
                                </label>
                                <label for="like" id="a-f">
                                    <img src="{% static 'icon/flag.png' %}">
                                </label>
                            </form>
                        </div>
                        <div class="comment-section" id="c-section">
                            <a href="">View all comments...</a>
                            <label>
                                <input type="text" placeholder="Write comment...">
                            </label>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% endfor %}
                </div>
                <div class="container2-2">
                    {% include '2_container.html' %}
                </div>
            </div>
            </div>
        </div>

        <script src="{% static 'js/header.js' %}"></script>
        <script src="{% static 'js/newsfeed.js' %}"></script>
        <script src="{% static 'js/profile.js' %}"></script>
        </body>
        </html>